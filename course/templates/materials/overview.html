{% extends "materials/sidebar.html" %}

{% block material %}
<form method="post" enctype="multipart/form-data" class="space-y-8">
    {% csrf_token %}

    <!-- Basic Information -->
    <section class="bg-white rounded-lg shadow-sm p-8">
        <h2 class="text-xl font-bold mb-6">Basic Information</h2>

        <div class="space-y-6">
            <!-- Course Title -->
            <div>
                <label for="{{ form.title.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                    Course Title
                </label>
                {{ form.title }}
                {% if form.title.errors %}
                <p class="mt-1 text-sm text-red-600">{{ form.title.errors.0 }}</p>
                {% endif %}
            </div>

            <!-- Course Subtitle -->
            <div>
                <label for="{{ form.subtitle.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                    Subtitle
                </label>
                {{ form.subtitle }}
                {% if form.subtitle.errors %}
                <p class="mt-1 text-sm text-red-600">{{ form.subtitle.errors.0 }}</p>
                {% endif %}
            </div>

            <!-- Category -->
            <div>
                <label for="{{ form.category.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                    Category
                </label>
                {{ form.category }}
                {% if form.category.errors %}
                <p class="mt-1 text-sm text-red-600">{{ form.category.errors.0 }}</p>
                {% endif %}
            </div>

            <!-- Cover Image -->
            {% if course.user == user %}
            <div>
                <label for="{{ form.cover_img.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                    Cover Image
                </label>
                <div class="mt-4">
                    {{ form.cover_img }}
                </div>
                {% if form.cover_img.errors %}
                <p class="mt-1 text-sm text-red-600">{{ form.cover_img.errors.0 }}</p>
                {% endif %}
            </div>
            {% endif %}

            <!-- Description -->
            <div>
                <label for="{{ form.description.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                    Course Description
                </label>
                {{ form.description }}
                {% if form.description.errors %}
                <p class="mt-1 text-sm text-red-600">{{ form.description.errors.0 }}</p>
                {% endif %}
            </div>
        </div>
    </section>

    <!-- Status (Conditional) -->
    {% if form.status and course.user == user %}
    <section class="bg-white rounded-lg shadow-sm p-8">
        <h2 class="text-xl font-bold mb-6">Publication Status</h2>

        <div>
            <label for="{{ form.status.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                Course Status
            </label>
            {{ form.status }}
            {% if form.status.errors %}
            <p class="mt-1 text-sm text-red-600">{{ form.status.errors.0 }}</p>
            {% endif %}
            <p class="mt-2 text-sm text-gray-500">Select whether this course should be published or remain as a draft
            </p>
        </div>
    </section>
    {% endif %}

    <!-- Course Timeline -->
     {% if form.instance.user == user %}
    <section class="bg-white rounded-lg shadow-sm p-8">
        <h2 class="text-xl font-bold mb-6">Course Timeline</h2>

        <div class="grid grid-cols-2 gap-6">
            <!-- Registration Start -->
            <div>
                <label for="{{ form.registration_start.id_for_label }}"
                    class="block text-sm font-semibold text-gray-700 mb-2">
                    Registration Start Date
                </label>
                {{ form.registration_start }}
                {% if form.registration_start.errors %}
                <p class="mt-1 text-sm text-red-600">{{ form.registration_start.errors.0 }}</p>
                {% endif %}
            </div>

            <!-- Registration End -->
            <div>
                <label for="{{ form.registration_end.id_for_label }}"
                    class="block text-sm font-semibold text-gray-700 mb-2">
                    Registration End Date
                </label>
                {{ form.registration_end }}
                {% if form.registration_end.errors %}
                <p class="mt-1 text-sm text-red-600">{{ form.registration_end.errors.0 }}</p>
                {% endif %}
            </div>

            <!-- Course Start -->
            <div>
                <label for="{{ form.course_start.id_for_label }}"
                    class="block text-sm font-semibold text-gray-700 mb-2">
                    Course Start Date
                </label>
                {{ form.course_start }}
                {% if form.course_start.errors %}
                <p class="mt-1 text-sm text-red-600">{{ form.course_start.errors.0 }}</p>
                {% endif %}
            </div>

            <!-- Course End -->
            <div>
                <label for="{{ form.course_end.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                    Course End Date
                </label>
                {{ form.course_end }}
                {% if form.course_end.errors %}
                <p class="mt-1 text-sm text-red-600">{{ form.course_end.errors.0 }}</p>
                {% endif %}
            </div>
        </div>
    </section>

    <!-- Action Buttons -->
    <div class="flex justify-end items-center space-x-4 pt-6">
        <a href="{% url 'dashboard' %}"
            class="px-6 py-3 border-2 border-gray-300 rounded-lg text-gray-700 font-semibold hover:bg-gray-50 transition">
            Cancel
        </a>
        <button type="submit"
            class="px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition">
            Update Course
        </button>
    </div>
    {% endif %}
</form>
</div>

{% endblock %}