{% extends "base.html" %}

{% block title %}{{ course.title }} - ELearning{% endblock %}

{% block content %}
<!-- Main Chat -->
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <div class="bg-white rounded-lg shadow-sm overflow-hidden" style="height: calc(100vh - 160px);">
        <div class="flex h-full">

            <!-- Conversations List -->
            <div class="w-1/3 border-r border-gray-200 flex flex-col">
                <div class="flex-1 overflow-y-auto">
                    {% for u in threads %}
                    <a href="{% url 'message' id=u.id %}"
                        class="flex items-start space-x-3 p-4 hover:bg-gray-50 border-l-4 border-blue-600 bg-blue-50">
                        {% if u.userprofile.picture %}
                        <img src="{{ u.userprofile.picture.url }}" alt="Profile picture" class="w-12 h-12 rounded-full object-cover">
                        {% else %}
                        <div
                            class="w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold flex-shrink-0">
                            {{ u.username|first|upper }}
                        </div>
                        {% endif %}
                        <div class="flex-1 min-w-0">
                            <div class="flex items-center justify-between mb-1">
                                <h3 class="font-semibold text-gray-900 truncate">{{ u.userprofile.name }}</h3>
                            </div>
                        </div>
                    </a>
                    {% endfor %}
                </div>
            </div>

            <!-- Right Side - Chat Area -->
            <div class="flex-1 flex flex-col">
                {% block chat_content %}
                {% endblock %}
            </div>

        </div>
    </div>
</div>

{% endblock %}